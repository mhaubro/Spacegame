//Author: MG

#include "Random.h"

Random ran;

static unsigned char ranSeq[] = { 126, 28, 60, 242, 99, 239, 181, 30, 21, 198, 104, 108, 59, 131, 250,
		203, 12, 117, 17, 208, 35, 219, 170, 10, 163, 106, 135, 20, 27, 40, 68,
		80, 9, 218, 116, 107, 255, 105, 67, 85, 225, 109, 15, 8, 14457, 48, 211,
		90, 153, 16, 221, 31, 134, 22, 233, 241, 176, 79, 76, 148, 128, 100,
		251, 246, 136, 112, 4, 197, 220, 55, 46, 18, 111, 32, 142, 43, 3, 11,
		113, 186, 137, 75, 244, 234, 175, 213, 83, 123, 89, 146, 201, 98, 143,
		127, 199, 141, 5, 184, 130, 62, 61, 82, 65, 34, 1, 238, 150, 64, 25,
		157, 86, 139, 226, 45, 204, 200, 93, 49, 97, 192, 223, 171, 63, 37, 95,
		74, 102, 96, 195, 222, 210, 52, 33, 71, 158, 122, 2, 188, 248, 160, 47,
		149, 247, 178, 182, 209, 19, 183, 73, 44, 66, 243, 174, 72, 249, 227,
		230, 84, 140, 254, 152, 191, 240, 129, 237, 77, 229, 91, 164, 162, 26,
		236, 51, 196, 14, 87, 224, 42, 214, 7, 194, 154, 110, 151, 36, 232, 165,
		253, 132, 138, 115, 124, 121, 23, 41, 78, 13, 58, 228, 252, 155, 54, 94,
		185, 6, 202, 190, 50, 133, 29, 179, 145, 189, 172, 125, 24, 38, 231,
		168, 193, 39, 166, 187, 70, 212, 216, 92, 177, 69, 159, 53, 120, 103,
		217, 81, 206, 215, 56, 119, 245, 169, 101, 205, 88, 147, 180, 167, 114,
		0, 161, 207, 173, 235, 156, 118 };

Random::Random() :
		recVal(42), index(0) {
}

Random::~Random() {
	// TODO Auto-generated destructor stub
}

//float Random::FloatOLD(int x) {
//	static short v1[] = { 5, 2, 8, 2, 1, 9, 6, 3, 9, 1, 3, 8, 4, 2, 8, 5, 9, 3,
//			5, 4 };
//	static short v2[] = { 12, 5, 0, 2, 7, 9 };
//	int y = (x >> 1) ^ (-(x & 1u) & 0xB400u);
//	return ((float) 1) / v1[(y + (v2[v1[x] % 6])) % 20];
//}

float Random::Float(int x) {
	int y = (x >> 1) ^ (-(x & 1u) & 0xB400u);
	return ((float) 1) / ranSeq[(y + (ranSeq[ranSeq[x] % 256])) % 256];
}

float Random::FloatRec() {
	static int y = (y >> 1) ^ (-(getRecVal() & 1u) & 0xB400u);
	return ((float) 1) / ranSeq[(y + getRecVal()) % 256];
}

void Random::setSeed(int x) {
	recVal = x;
}

char Random::getRecVal() {
	return recVal += ranSeq[(index++) % 256];
}
